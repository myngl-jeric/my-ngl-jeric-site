<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    .question {
      display: none;
    }
    .question.active {
      display: block;
    }
    .next-btn {
      margin-top: 15px;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <h1>Welcome to the Quiz</h1>
  <form id="quizForm" method="POST" action="https://formsubmit.co/notjery05@gmail.com">
    <!-- Hidden input for user name from URL -->
    <input type="hidden" name="username" id="userNameInput" />

    <!-- Q1 -->
    <div class="question active" data-question="1">
      <label>1. Question 1:</label><br />
      <label><input type="radio" name="q1" value="a" /> Option A</label><br />
      <label><input type="radio" name="q1" value="b" /> Option B</label><br />
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q2 -->
    <div class="question" data-question="2">
      <label>2. Question 2:</label><br />
      <label><input type="radio" name="q2" value="a" /> Option A</label><br />
      <label><input type="radio" name="q2" value="b" /> Option B</label><br />
      <textarea name="q2text" placeholder="Or write your answer (min 10 chars)"></textarea>
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q3 -->
    <div class="question" data-question="3">
      <label>3. Question 3:</label><br />
      <label><input type="radio" name="q3" value="a" /> Option A</label><br />
      <label><input type="radio" name="q3" value="b" /> Option B</label><br />
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q4 -->
    <div class="question" data-question="4">
      <label>4. Question 4:</label><br />
      <label><input type="radio" name="q4" value="a" /> Option A</label><br />
      <label><input type="radio" name="q4" value="b" /> Option B</label><br />
      <textarea name="q4text" placeholder="Or write your answer (min 10 chars)"></textarea>
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q5 -->
    <div class="question" data-question="5">
      <label>5. Question 5:</label><br />
      <label><input type="radio" name="q5" value="a" /> Option A</label><br />
      <label><input type="radio" name="q5" value="b" /> Option B</label><br />
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q6 -->
    <div class="question" data-question="6">
      <label>6. Question 6:</label><br />
      <label><input type="radio" name="q6" value="a" /> Option A</label><br />
      <label><input type="radio" name="q6" value="b" /> Option B</label><br />
      <input type="text" name="q6text" maxlength="3" placeholder="Or write 2-3 chars" />
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q7 -->
    <div class="question" data-question="7">
      <label>7. Question 7:</label><br />
      <textarea name="q7" placeholder="At least 10 characters"></textarea>
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q8 -->
    <div class="question" data-question="8">
      <label>8. Question 8:</label><br />
      <textarea name="q8" placeholder="At least 10 characters"></textarea>
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q9 -->
    <div class="question" data-question="9">
      <label>9. Question 9:</label><br />
      <textarea name="q9" placeholder="At least 10 characters"></textarea>
      <button type="button" class="next-btn">Next</button>
    </div>

    <!-- Q10 -->
    <div class="question" data-question="10">
      <label>10. Question 10:</label><br />
      <textarea name="q10" placeholder="At least 10 characters"></textarea>
      <button type="submit">Submit</button>
    </div>
  </form>

  <script>
    // Get "name" from URL
    const params = new URLSearchParams(window.location.search);
    const userName = params.get("name");
    const userNameInput = document.getElementById("userNameInput");

    if (!userName || userName.length < 4 || userName.length > 20) {
      alert("Invalid or missing name.");
      window.location.href = "index.html";
    } else {
      userNameInput.value = userName;
    }

    // Navigation
    const questions = document.querySelectorAll(".question");
    const nextBtns = document.querySelectorAll(".next-btn");

    nextBtns.forEach((btn, index) => {
      btn.addEventListener("click", () => {
        if (validateQuestion(index + 1)) {
          questions[index].classList.remove("active");
          questions[index + 1].classList.add("active");
        } else {
          alert("Please answer this question before proceeding.");
        }
      });
    });

    // Exclusive input: disable text if radio is checked, and vice versa
    function setupMutualExclusion() {
      const pairs = [
        { radios: 'q2', text: 'q2text', min: 10 },
        { radios: 'q4', text: 'q4text', min: 10 },
        { radios: 'q6', text: 'q6text', min: 2, max: 3 },
      ];

      pairs.forEach(({ radios, text }) => {
        const radiosList = document.querySelectorAll(`input[name="${radios}"]`);
        const textInput = document.querySelector(`[name="${text}"]`);

        radiosList.forEach(radio => {
          radio.addEventListener('change', () => {
            if (radio.checked) textInput.value = '';
          });
        });

        textInput.addEventListener('input', () => {
          if (textInput.value.trim() !== '') {
            radiosList.forEach(r => r.checked = false);
          }
        });
      });
    }

    // Validate each question
    function validateQuestion(number) {
      switch (number) {
        case 1: return document.querySelector('input[name="q1"]:checked');
        case 2:
          const q2Radio = document.querySelector('input[name="q2"]:checked');
          const q2Text = document.querySelector('textarea[name="q2text"]').value.trim();
          return q2Radio || q2Text.length >= 10;
        case 3: return document.querySelector('input[name="q3"]:checked');
        case 4:
          const q4Radio = document.querySelector('input[name="q4"]:checked');
          const q4Text = document.querySelector('textarea[name="q4text"]').value.trim();
          return q4Radio || q4Text.length >= 10;
        case 5: return document.querySelector('input[name="q5"]:checked');
        case 6:
          const q6Radio = document.querySelector('input[name="q6"]:checked');
          const q6Text = document.querySelector('input[name="q6text"]').value.trim();
          return q6Radio || (q6Text.length >= 2 && q6Text.length <= 3);
        case 7:
        case 8:
        case 9:
        case 10:
          const qText = document.querySelector(`textarea[name="q${number}"]`).value.trim();
          return qText.length >= 10;
        default: return false;
      }
    }

    setupMutualExclusion();
  </script>
</body>
</html>